{"ast":null,"code":"// App.jsx\nimport React,{useState,useEffect}from'react';import{BrowserRouter as Router,Routes,Route,Link,Navigate}from'react-router-dom';import{AppBar,Toolbar,Typography,Box,Drawer,List,ListItem,ListItemIcon,ListItemText,CssBaseline,ThemeProvider,createTheme,IconButton,Menu,MenuItem}from'@mui/material';import{Dashboard as DashboardIcon,Phone,Queue,People,Assessment,AccountCircle,ExitToApp}from'@mui/icons-material';import Dashboard from'./components/Dashboard';import Calls from'./pages/Calls';import Queues from'./pages/Queues';import Agents from'./pages/Agents';import Reports from'./pages/Reports';import Login from'./pages/Login';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const drawerWidth=240;const theme=createTheme({palette:{primary:{main:'#1976d2'},secondary:{main:'#dc004e'}}});const allMenuItems=[{text:'Dashboard',icon:/*#__PURE__*/_jsx(DashboardIcon,{}),path:'/',permission:'dashboard'},{text:'Llamadas',icon:/*#__PURE__*/_jsx(Phone,{}),path:'/calls',permission:'calls'},{text:'Colas',icon:/*#__PURE__*/_jsx(Queue,{}),path:'/queues',permission:'queues'},{text:'Agentes',icon:/*#__PURE__*/_jsx(People,{}),path:'/agents',permission:'agents'},{text:'Reportes',icon:/*#__PURE__*/_jsx(Assessment,{}),path:'/reports',permission:'reports'}];function App(){const[user,setUser]=useState(null);const[anchorEl,setAnchorEl]=useState(null);useEffect(()=>{// Verificar si hay usuario guardado\nconst savedUser=localStorage.getItem('user');if(savedUser){setUser(JSON.parse(savedUser));}},[]);const handleLoginSuccess=userData=>{setUser(userData);};const handleLogout=()=>{localStorage.removeItem('token');localStorage.removeItem('user');setUser(null);setAnchorEl(null);};const menuItems=user?allMenuItems.filter(item=>user.permissions[item.permission]):[];if(!user){return/*#__PURE__*/_jsx(ThemeProvider,{theme:theme,children:/*#__PURE__*/_jsx(Login,{onLoginSuccess:handleLoginSuccess})});}return/*#__PURE__*/_jsx(ThemeProvider,{theme:theme,children:/*#__PURE__*/_jsx(Router,{children:/*#__PURE__*/_jsxs(Box,{sx:{display:'flex'},children:[/*#__PURE__*/_jsx(CssBaseline,{}),/*#__PURE__*/_jsx(AppBar,{position:\"fixed\",sx:{zIndex:theme=>theme.zIndex.drawer+1},children:/*#__PURE__*/_jsxs(Toolbar,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",noWrap:true,component:\"div\",sx:{flexGrow:1},children:\"Call Center Analytics - Issabel\"}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",sx:{mr:2},children:user.full_name}),/*#__PURE__*/_jsx(IconButton,{color:\"inherit\",onClick:e=>setAnchorEl(e.currentTarget),children:/*#__PURE__*/_jsx(AccountCircle,{})}),/*#__PURE__*/_jsx(Menu,{anchorEl:anchorEl,open:Boolean(anchorEl),onClose:()=>setAnchorEl(null),children:/*#__PURE__*/_jsxs(MenuItem,{onClick:handleLogout,children:[/*#__PURE__*/_jsx(ExitToApp,{sx:{mr:1}}),\" Cerrar Sesi\\xF3n\"]})})]})}),/*#__PURE__*/_jsxs(Drawer,{variant:\"permanent\",sx:{width:drawerWidth,flexShrink:0,'& .MuiDrawer-paper':{width:drawerWidth,boxSizing:'border-box'}},children:[/*#__PURE__*/_jsx(Toolbar,{}),/*#__PURE__*/_jsx(Box,{sx:{overflow:'auto'},children:/*#__PURE__*/_jsx(List,{children:menuItems.map(item=>/*#__PURE__*/_jsxs(ListItem,{button:true,component:Link,to:item.path,children:[/*#__PURE__*/_jsx(ListItemIcon,{children:item.icon}),/*#__PURE__*/_jsx(ListItemText,{primary:item.text})]},item.text))})})]}),/*#__PURE__*/_jsxs(Box,{component:\"main\",sx:{flexGrow:1,p:3},children:[/*#__PURE__*/_jsx(Toolbar,{}),/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/\",element:/*#__PURE__*/_jsx(Dashboard,{})}),/*#__PURE__*/_jsx(Route,{path:\"/calls\",element:/*#__PURE__*/_jsx(Calls,{})}),/*#__PURE__*/_jsx(Route,{path:\"/queues\",element:/*#__PURE__*/_jsx(Queues,{})}),/*#__PURE__*/_jsx(Route,{path:\"/agents\",element:/*#__PURE__*/_jsx(Agents,{})}),/*#__PURE__*/_jsx(Route,{path:\"/reports\",element:/*#__PURE__*/_jsx(Reports,{})})]})]})]})})});}export default App;","map":{"version":3,"names":["React","useState","useEffect","BrowserRouter","Router","Routes","Route","Link","Navigate","AppBar","Toolbar","Typography","Box","Drawer","List","ListItem","ListItemIcon","ListItemText","CssBaseline","ThemeProvider","createTheme","IconButton","Menu","MenuItem","Dashboard","DashboardIcon","Phone","Queue","People","Assessment","AccountCircle","ExitToApp","Calls","Queues","Agents","Reports","Login","jsx","_jsx","jsxs","_jsxs","drawerWidth","theme","palette","primary","main","secondary","allMenuItems","text","icon","path","permission","App","user","setUser","anchorEl","setAnchorEl","savedUser","localStorage","getItem","JSON","parse","handleLoginSuccess","userData","handleLogout","removeItem","menuItems","filter","item","permissions","children","onLoginSuccess","sx","display","position","zIndex","drawer","variant","noWrap","component","flexGrow","mr","full_name","color","onClick","e","currentTarget","open","Boolean","onClose","width","flexShrink","boxSizing","overflow","map","button","to","p","element"],"sources":["/opt/callcenter-analytics/frontend/src/App.jsx"],"sourcesContent":["// App.jsx\nimport React, { useState, useEffect } from 'react';\nimport { BrowserRouter as Router, Routes, Route, Link, Navigate } from 'react-router-dom';\nimport {\n  AppBar,\n  Toolbar,\n  Typography,\n  Box,\n  Drawer,\n  List,\n  ListItem,\n  ListItemIcon,\n  ListItemText,\n  CssBaseline,\n  ThemeProvider,\n  createTheme,\n  IconButton,\n  Menu,\n  MenuItem,\n} from '@mui/material';\nimport {\n  Dashboard as DashboardIcon,\n  Phone,\n  Queue,\n  People,\n  Assessment,\n  AccountCircle,\n  ExitToApp,\n} from '@mui/icons-material';\nimport Dashboard from './components/Dashboard';\nimport Calls from './pages/Calls';\nimport Queues from './pages/Queues';\nimport Agents from './pages/Agents';\nimport Reports from './pages/Reports';\nimport Login from './pages/Login';\n\nconst drawerWidth = 240;\n\nconst theme = createTheme({\n  palette: {\n    primary: {\n      main: '#1976d2',\n    },\n    secondary: {\n      main: '#dc004e',\n    },\n  },\n});\n\nconst allMenuItems = [\n  { text: 'Dashboard', icon: <DashboardIcon />, path: '/', permission: 'dashboard' },\n  { text: 'Llamadas', icon: <Phone />, path: '/calls', permission: 'calls' },\n  { text: 'Colas', icon: <Queue />, path: '/queues', permission: 'queues' },\n  { text: 'Agentes', icon: <People />, path: '/agents', permission: 'agents' },\n  { text: 'Reportes', icon: <Assessment />, path: '/reports', permission: 'reports' },\n];\n\nfunction App() {\n  const [user, setUser] = useState(null);\n  const [anchorEl, setAnchorEl] = useState(null);\n\n  useEffect(() => {\n    // Verificar si hay usuario guardado\n    const savedUser = localStorage.getItem('user');\n    if (savedUser) {\n      setUser(JSON.parse(savedUser));\n    }\n  }, []);\n\n  const handleLoginSuccess = (userData) => {\n    setUser(userData);\n  };\n\n  const handleLogout = () => {\n    localStorage.removeItem('token');\n    localStorage.removeItem('user');\n    setUser(null);\n    setAnchorEl(null);\n  };\n\n  const menuItems = user ? allMenuItems.filter(item => user.permissions[item.permission]) : [];\n\n  if (!user) {\n    return (\n      <ThemeProvider theme={theme}>\n        <Login onLoginSuccess={handleLoginSuccess} />\n      </ThemeProvider>\n    );\n  }\n\n  return (\n    <ThemeProvider theme={theme}>\n      <Router>\n        <Box sx={{ display: 'flex' }}>\n          <CssBaseline />\n          \n          {/* AppBar */}\n          <AppBar\n            position=\"fixed\"\n            sx={{ zIndex: (theme) => theme.zIndex.drawer + 1 }}\n          >\n            <Toolbar>\n              <Typography variant=\"h6\" noWrap component=\"div\" sx={{ flexGrow: 1 }}>\n                Call Center Analytics - Issabel\n              </Typography>\n              <Typography variant=\"body2\" sx={{ mr: 2 }}>\n                {user.full_name}\n              </Typography>\n              <IconButton\n                color=\"inherit\"\n                onClick={(e) => setAnchorEl(e.currentTarget)}\n              >\n                <AccountCircle />\n              </IconButton>\n              <Menu\n                anchorEl={anchorEl}\n                open={Boolean(anchorEl)}\n                onClose={() => setAnchorEl(null)}\n              >\n                <MenuItem onClick={handleLogout}>\n                  <ExitToApp sx={{ mr: 1 }} /> Cerrar Sesi√≥n\n                </MenuItem>\n              </Menu>\n            </Toolbar>\n          </AppBar>\n\n          {/* Sidebar */}\n          <Drawer\n            variant=\"permanent\"\n            sx={{\n              width: drawerWidth,\n              flexShrink: 0,\n              '& .MuiDrawer-paper': {\n                width: drawerWidth,\n                boxSizing: 'border-box',\n              },\n            }}\n          >\n            <Toolbar />\n            <Box sx={{ overflow: 'auto' }}>\n              <List>\n                {menuItems.map((item) => (\n                  <ListItem\n                    button\n                    key={item.text}\n                    component={Link}\n                    to={item.path}\n                  >\n                    <ListItemIcon>{item.icon}</ListItemIcon>\n                    <ListItemText primary={item.text} />\n                  </ListItem>\n                ))}\n              </List>\n            </Box>\n          </Drawer>\n\n          {/* Main Content */}\n          <Box component=\"main\" sx={{ flexGrow: 1, p: 3 }}>\n            <Toolbar />\n            <Routes>\n              <Route path=\"/\" element={<Dashboard />} />\n              <Route path=\"/calls\" element={<Calls />} />\n              <Route path=\"/queues\" element={<Queues />} />\n              <Route path=\"/agents\" element={<Agents />} />\n              <Route path=\"/reports\" element={<Reports />} />\n            </Routes>\n          </Box>\n        </Box>\n      </Router>\n    </ThemeProvider>\n  );\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}